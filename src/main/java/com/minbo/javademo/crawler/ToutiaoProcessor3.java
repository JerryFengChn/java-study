package com.minbo.javademo.crawler;

import org.apache.commons.collections.CollectionUtils;
import org.apache.http.HttpHost;

import us.codecraft.webmagic.Page;
import us.codecraft.webmagic.Site;
import us.codecraft.webmagic.Spider;
import us.codecraft.webmagic.processor.PageProcessor;
import us.codecraft.webmagic.selector.JsonPathSelector;
import us.codecraft.webmagic.thread.CountableThreadPool;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;

/**
 * 今日头条-文章详情抓取解析
 */
public class ToutiaoProcessor3 implements PageProcessor {

	private Site site = Site.me().setRetryTimes(3).setSleepTime(1000)
			.setHttpProxy(new HttpHost("171.38.1.110", 8118));
    
    //今日头条，爬虫新闻分类
    
    private static String tag = "__all__";				//推荐1
//    private static String tag = "video";				//视频2
//    private static String tag = "news_hot";			//热点3
//    private static String tag = "news_society";			//社会4
//    private static String tag = "news_entertainment";	//娱乐5
//    private static String tag = "news_military";		//军事6
//    private static String tag = "news_tech";			//科技7
//    private static String tag = "news_car";			//汽车8
//    private static String tag = "news_sports";			//体育9
//    private static String tag = "news_finance";			//财经10
//    private static String tag = "news_world";			//国际11
//    private static String tag = "news_fashion";			//时尚12
//    private static String tag = "news_game";			//游戏13
//    private static String tag = "news_baby";			//育儿14
//    private static String tag = "news_travel";			//旅游15
//    private static String tag = "news_discovery";		//探索16
//    private static String tag = "news_regimen";			//养生17
//    private static String tag = "news_history";			//历史18
//    private static String tag = "news_food";			//美食19
//    private static String tag = "news_story";			//故事20
//    private static String tag = "news_essay";			//美文21
    
    private static int count = 20;
    private static long max_behot_time = getStamp();
    private static String LIST_URL = "https://m.toutiao.com/i6464472940002935310/info/";

    @Override
    public void process(Page page) {
//        if (page.getUrl().regex(LIST_URL).match()) {
//            List<String> ids = new JsonPathSelector("$.data[*].group_id").selectList(page.getRawText());
//            if (CollectionUtils.isNotEmpty(ids)) {
//                for (String id : ids) {
//                    page.addTargetRequest(LIST_URL);
//                }
//            }
//        } else {
//        		page.setRawText("{\"return_count\": 14, \"has_more\": true, \"page_id\": \"/__all__/\", \"_ck\": {}, \"html\": null, \"data\": [{\"media_name\": \"\\u957f\\u5b89\\u8857\\u77e5\\u4e8b\", \"ban_comment\": 0, \"abstract\": \"\\u5c0f\\u4f19\\u4f34\\u4eec\\u90fd\\u8bb0\\u5f97\\u300a\\u4eba\\u6c11\\u7684\\u540d\\u4e49\\u300b\\u4e2d\\u7684\\u8d75\\u5fb7\\u6c49\\uff0c\\u5bb6\\u91cc\\u7684\\u51b0\\u7bb1\\u3001\\u5e8a\\u57ab\\u3001\\u7535\\u89c6\\u5899\\u3001\\u8336\\u51e0\\uff0c\\u51e0\\u4e4e\\u90fd\\u6709\\u7684\\u89d2\\u843d\\u90fd\\u85cf\\u7740\\u73b0\\u91d1\\u3002\\u6700\\u8fd1\\u5df4\\u897f\\u4e5f\\u51fa\\u4e86\\u4e00\\u4e2a\\u201c\\u8d75\\u5fb7\\u6c49\\u201d\\u3002\\u5df4\\u897f\\u524d\\u653f\\u5e9c\\u4e8b\\u52a1\\u79d8\\u4e66\\u957f\\u70ed\\u5fb7\\u5c14\\u2022\\u7ef4\\u57c3\\u62c9\\u2022\\u5229\\u9a6c8\\u65e5\\u56e0\\u6d89\\u5acc\\u8d2a\\u8150\\u88ab\\u6355\\uff0c\\u51e0\\u5929\\u524d\\u8b66\\u65b9\\u4ece\\u4ed6\\u5728\\u5317\\u90e8\\u57ce\\u5e02\\u8428\\u5c14\\u74e6\\u591a\\u4e00\\u5904\\u4f4f\\u6240\\u67e5\\u83b75100\\u4e07\\u96f7\\u4e9a\\u5c14\\uff08\\u7ea6\\u54081652\\u4e07\\u7f8e\\u5143\\uff09\\u73b0\\u91d1\\u3002\", \"image_list\": [], \"datetime\": \"2017-09-12 18:06\", \"article_type\": 0, \"tag\": \"news_world\", \"has_m3u8_video\": 0, \"keywords\": \"\\u8428\\u5c14\\u74e6\\u591a,\\u5df4\\u897f,\\u5df4\\u897f\\u603b\\u7edf,\\u5229\\u9a6c,\\u7279\\u6885\\u5c14\", \"display_dt\": 1505196873, \"has_mp4_video\": 0, \"aggr_type\": 1, \"cell_type\": 0, \"article_sub_type\": 0, \"bury_count\": 1, \"title\": \"\\u5df4\\u897f\\u603b\\u7edf\\u4e2d\\u56fd\\u4e4b\\u884c\\u597d\\u5fc3\\u60c5\\uff0c\\u5168\\u88ab\\u8fd9\\u4e2a\\u4eb2\\u4fe1\\u6bc1\\u4e86\", \"source_icon_style\": 2, \"tip\": 0, \"has_video\": false, \"share_url\": \"http://toutiao.com/a6464771342506918413/?iid=0&app=news_article\", \"source\": \"\\u957f\\u5b89\\u8857\\u77e5\\u4e8b\", \"comment_count\": 216, \"article_url\": \"http://toutiao.com/group/6464771342506918413/\", \"publish_time\": 1505196873, \"group_flags\": 0, \"middle_mode\": true, \"gallary_image_count\": 3, \"tag_id\": \"6464771342506918413\", \"source_url\": \"/i6464771342506918413/\", \"display_url\": \"http://toutiao.com/group/6464771342506918413/\", \"is_stick\": false, \"item_id\": \"6464771342506918413\", \"repin_count\": 2918, \"cell_flag\": 11, \"source_open_url\": \"sslocal://profile?uid=4327876576\", \"level\": 0, \"digg_count\": 1, \"behot_time\": 1505210765, \"hot\": 0, \"cursor\": 1505210765999, \"url\": \"http://toutiao.com/group/6464771342506918413/\", \"like_count\": 1, \"image_url\": \"https://p3.pstatp.com/list/39f90001dd8ff39ef748\", \"user_repin\": 0, \"has_image\": true, \"video_style\": 0, \"media_info\": {\"avatar_url\": \"http://p3.pstatp.com/large/3538/9145332\", \"media_id\": 4327905357, \"name\": \"\\u957f\\u5b89\\u8857\\u77e5\\u4e8b\", \"user_verified\": true}, \"group_id\": \"6464771342506918413\"}, {\"media_name\": \"talkop\\u6d77\\u8d3c\\u738b\", \"ban_comment\": 0, \"abstract\": \"TalkOP\\u6d77\\u8d3c\\u738b\\u8bba\\u575b\\u5185\\u5bb9\\uff0c\\u672a\\u7ecf\\u8bb8\\u53ef\\u8bf7\\u52ff\\u8f6c\\u8f7d\\u3002\\u672c\\u6587\\u4e3aTalkOP\\u6d77\\u8d3c\\u738b\\u8bba\\u575b\\u3010\\u4e91\\u91cc\\u3011\\u4f5c\\u54c1----------------\\u5927\\u5988\\u7bc7\\u5feb\\u7ed3\\u675f\\u4e86\\uff0c\\u63a5\\u4e0b\\u6765\\u5c31\\u662f\\u548c\\u4e4b\\u56fd\\u7bc7\\u3002\\u5173\\u4e8e\\u548c\\u4e4b\\u56fd\\uff0c\\u5df2\\u7ecf\\u57cb\\u4e86\\u5f88\\u591a\\u4f0f\\u7b14\\uff0c\\u4eca\\u5929\\u6574\\u7406\\u4e00\\u4e0b\\u3002\\u4e54\\u5df4\\u8001\\u7239\\u4e54\\u5df4\\u7684\\u8001\\u7239\\u66fe\\u63d0\\u5230\\u770b\\u5230\\u6f2b\\u5c71\\u7684\\u6a31\\u82b1\\uff0c\\u7edd\\u75c7\\u88ab\\u6cbb\\u6108\\u3002\", \"image_list\": [{\"url\": \"https://p3.pstatp.com/list/39b200030b0264867987\", \"width\": 425, \"height\": 239}, {\"url\": \"https://p3.pstatp.com/list/39af0004fcf97d8286c6\", \"width\": 570, \"height\": 320}, {\"url\": \"https://p3.pstatp.com/list/39ac0004fdcd8b795dd7\", \"width\": 520, \"height\": 292}], \"datetime\": \"2017-09-12 17:58\", \"article_type\": 0, \"more_mode\": true, \"tag\": \"news_comic\", \"has_m3u8_video\": 0, \"keywords\": \"\\u7d22\\u9686,\\u5927\\u5c71,\\u767d\\u80e1\\u5b50,\\u4e4b\\u56fd,\\u9526\\u536b\\u95e8,\\u6076\\u9b54\\u679c\\u5b9e\", \"display_dt\": 1504838322, \"has_mp4_video\": 0, \"aggr_type\": 1, \"cell_type\": 0, \"article_sub_type\": 0, \"bury_count\": 0, \"title\": \"\\u300c\\u4e91\\u91cc\\u300d\\u548c\\u4e4b\\u56fd\\u4f0f\\u7b14\\u6574\\u7406\\u53ca\\u76f8\\u5173\\u5267\\u60c5\\u731c\\u6d4b\\uff08\\u8d85\\u5b8c\\u6574\\uff09\", \"source_icon_style\": 6, \"tip\": 0, \"has_video\": false, \"share_url\": \"http://toutiao.com/a6463231377058824718/?iid=0&app=news_article\", \"source\": \"talkop\\u6d77\\u8d3c\\u738b\", \"comment_count\": 68, \"article_url\": \"http://toutiao.com/group/6463231377058824718/\", \"publish_time\": 1504838322, \"group_flags\": 0, \"gallary_image_count\": 37, \"tag_id\": \"6463231377058824718\", \"source_url\": \"/i6463231377058824718/\", \"display_url\": \"http://toutiao.com/group/6463231377058824718/\", \"is_stick\": false, \"item_id\": \"6463231377058824718\", \"repin_count\": 373, \"cell_flag\": 11, \"source_open_url\": \"sslocal://profile?uid=5535646065\", \"level\": 0, \"digg_count\": 0, \"behot_time\": 1505210315, \"hot\": 0, \"cursor\": 1505210315999, \"url\": \"http://toutiao.com/group/6463231377058824718/\", \"user_repin\": 0, \"has_image\": true, \"video_style\": 0, \"media_info\": {\"avatar_url\": \"http://p5a.pstatp.com/large/18a100091f30fb57c2fe\", \"media_id\": 5535646065, \"name\": \"talkop\\u6d77\\u8d3c\\u738b\", \"user_verified\": true}, \"group_id\": \"6463231377058824718\"}, {\"log_extra\": \"{\\\"external_action\\\": 0, \\\"rit\\\": 1, \\\"convert_id\\\": 0, \\\"req_id\\\": \\\"30953211505211215528\\\", \\\"ad_price\\\": \\\"Wbe8dAABgSdZt7x0AAGBJ_rqHIh8DyfVJiCItQ\\\"}\", \"ban_comment\": 1, \"abstract\": \"\", \"image_list\": [], \"datetime\": \"2017-09-12 17:51\", \"article_type\": 1, \"tag\": \"ad\", \"display_info\": \"10\\u67081\\u65e5-3\\u65e5\\u3010\\u5e7f\\u5dde\\u8f66\\u5c55\\u3011\\u5e7f\\u5dde\\u56fd\\u9645\\u91c7\\u8d2d\\u4f1a\\u5c55\\u4e2d\\u5fc3\", \"has_m3u8_video\": 0, \"display_dt\": 1503986977, \"has_mp4_video\": 0, \"aggr_type\": 1, \"expire_seconds\": 1829950, \"cell_type\": 0, \"article_sub_type\": 0, \"bury_count\": 0, \"title\": \"10\\u67081\\u65e5-3\\u65e5\\u3010\\u5e7f\\u5dde\\u8f66\\u5c55\\u3011\\u5e7f\\u5dde\\u56fd\\u9645\\u91c7\\u8d2d\\u4f1a\\u5c55\\u4e2d\\u5fc3\", \"source_icon_style\": 3, \"tip\": 0, \"has_video\": false, \"share_url\": \"http://toutiao.com/group/6459574882861580558/?iid=0&app=news_article\", \"label\": \"\\u5e7f\\u544a\", \"source\": \"\\u5e7f\\u5dde\\u8f66\\u5c55\", \"comment_count\": 0, \"article_url\": \"http://gz.vautoshow.com/special/autoshow/599b9d74ac053b8f3479f54d?channel=jrtt\", \"ad_data\": {\"log_extra\": \"{\\\"external_action\\\": 0, \\\"rit\\\": 1, \\\"convert_id\\\": 0, \\\"req_id\\\": \\\"30953211505211215528\\\", \\\"ad_price\\\": \\\"Wbe8dAABgSdZt7x0AAGBJ_rqHIh8DyfVJiCItQ\\\"}\", \"phone_number\": \"4006655222\", \"game_key\": null, \"star\": null, \"orientation\": null, \"form_height\": null, \"track_url\": \"\", \"button_icon\": 0, \"form_url\": null, \"display_type\": 2, \"alert_text\": \"\\u786e\\u8ba4\\u62e8\\u62534006655222\\uff1f\", \"id\": 67609570823, \"description\": \"\\u5e7f\\u5dde\\u8f66\\u5c55\", \"click_track_url\": \"\", \"dial_action_type\": null, \"use_size_validation\": null, \"form_width\": null, \"title\": \"10\\u67081\\u65e5-3\\u65e5\\u3010\\u5e7f\\u5dde\\u8f66\\u5c55\\u3011\\u5e7f\\u5dde\\u56fd\\u9645\\u91c7\\u8d2d\\u4f1a\\u5c55\\u4e2d\\u5fc3\", \"click_track_url_list\": [], \"label\": \"\\u5e7f\\u544a\", \"source\": \"\\u5e7f\\u5dde\\u8f66\\u5c55\", \"btn_text\": \"\\u54a8\\u8be2\\u70ed\\u7ebf\", \"track_url_list\": [], \"game_name\": null, \"type\": \"action\", \"image\": {\"url\": \"http://p3.pstatp.com/large/380700096edd81fa9719\", \"width\": 690, \"url_list\": [{\"url\": \"http://p3.pstatp.com/large/380700096edd81fa9719\"}], \"uri\": \"380700096edd81fa9719\", \"height\": 388}}, \"large_mode\": true, \"type\": \"action\", \"large_image_url\": \"http://p3.pstatp.com/large/380700096edd81fa9719\", \"publish_time\": 1503986977, \"ad_id\": 67609570823, \"group_flags\": 4096, \"has_image\": false, \"tag_id\": \"6459574882861580558\", \"source_url\": \"/item/6459574882861580558/\", \"display_url\": \"http://gz.vautoshow.com/special/autoshow/599b9d74ac053b8f3479f54d?channel=jrtt\", \"is_stick\": false, \"item_id\": \"6459574882861580558\", \"repin_count\": 3, \"cell_flag\": 10, \"source_open_url\": \"sslocal://search?from=feed_source&keyword=%E5%B9%BF%E5%B7%9E%E8%BD%A6%E5%B1%95\", \"level\": 0, \"digg_count\": 0, \"behot_time\": 1505209865, \"hot\": 0, \"cursor\": 1505209865999, \"url\": \"http://gz.vautoshow.com/special/autoshow/599b9d74ac053b8f3479f54d?channel=jrtt\", \"ad_label\": \"\\u5e7f\\u544a\", \"user_repin\": 0, \"label_style\": 3, \"video_style\": 0, \"group_id\": \"6459574882861580558\"}, {\"media_name\": \"\\u5c0f\\u98de\\u732a\\u89c2\\u5bdf\", \"ban_comment\": 0, \"abstract\": \"\\u667a\\u5546\\u6392\\u540d\\u4e2d\\u56fd\\u4eba\\u667a\\u5546\\u4e00\\u76f4\\u88ab\\u5168\\u7403\\u8ba4\\u4e3a\\u662f\\u6700\\u9ad8\\u7684\\uff0c\\u540e\\u6765\\u5728\\u82f1\\u56fd\\u79d1\\u5b66\\u5bb6\\u7684\\u7814\\u7a76\\u4e4b\\u4e0b\\u8bc1\\u660e\\u4e86\\u8fd9\\u70b9\\uff0c\\u4e9a\\u6d32\\u9ec4\\u76ae\\u80a4\\u4eba\\u4e2d\\u62e5\\u6709\\u4e16\\u754c\\u6700\\u9ad8\\u7684\\u5e73\\u5747\\u667a\\u5546\\uff0c\\u5176\\u4e2d\\u4e2d\\u56fd\\u4eba\\u3001\\u65e5\\u672c\\u4eba\\u5462\\u3001\\u671d\\u9c9c\\u4eba\\u4f4d\\u5c45\\u4e16\\u754c\\u524d\\u4e09\\u3002\\u800c\\u8fd9\\u4e09\\u4e2a\\u56fd\\u5bb6\\u90fd\\u662f\\u5728\\u6c49\\u6587\\u5316\\u5f71\\u54cd\\u4e0b\\u8fdb\\u884c\\u7740\\u5386\\u53f2\\u7684\\u6f14\\u53d8\\u3002\", \"image_list\": [], \"datetime\": \"2017-09-12 17:43\", \"article_type\": 0, \"tag\": \"news_military\", \"has_m3u8_video\": 0, \"keywords\": \"\\u6b7c20,F-35,\\u7f8e\\u519b,\\u7f8e\\u56fd,\\u65e0\\u4eba\\u673a,F-22,VT-4,\\u6b7c-20\", \"display_dt\": 1505197614, \"has_mp4_video\": 0, \"aggr_type\": 1, \"cell_type\": 0, \"article_sub_type\": 0, \"bury_count\": 0, \"title\": \"\\u7f8e\\u56fd\\u4eba\\uff1a\\u4e2d\\u56fd\\u4eba\\u667a\\u5546\\u5728\\u5168\\u7403\\u6700\\u9ad8\\uff0c\\u552f\\u4e00\\u80fd\\u628a\\u7f8e\\u519b\\u62c9\\u4e0b\\u9738\\u4e3b\\u5b9d\\u5ea7\\u7684\\u56fd\\u5bb6\", \"source_icon_style\": 6, \"tip\": 0, \"has_video\": false, \"share_url\": \"http://toutiao.com/a6464774526751212046/?iid=0&app=news_article\", \"source\": \"\\u5c0f\\u98de\\u732a\\u89c2\\u5bdf\", \"comment_count\": 184, \"article_url\": \"http://toutiao.com/item/6464774526751212046/\", \"publish_time\": 1505197614, \"group_flags\": 0, \"middle_mode\": true, \"gallary_image_count\": 3, \"tag_id\": \"6464774526751212046\", \"source_url\": \"/i6464774526751212046/\", \"display_url\": \"http://toutiao.com/group/6464774526751212046/\", \"is_stick\": false, \"item_id\": \"6464774526751212046\", \"repin_count\": 760, \"cell_flag\": 11, \"source_open_url\": \"sslocal://profile?uid=5601449382\", \"level\": 0, \"digg_count\": 2, \"behot_time\": 1505209415, \"hot\": 0, \"cursor\": 1505209415999, \"url\": \"http://toutiao.com/item/6464774526751212046/\", \"like_count\": 2, \"image_url\": \"https://p3.pstatp.com/list/39f80001d7ce145796ef\", \"user_repin\": 0, \"has_image\": true, \"video_style\": 0, \"media_info\": {\"avatar_url\": \"http://p3.pstatp.com/large/8953/4471961306\", \"media_id\": 5601449382, \"name\": \"\\u5c0f\\u98de\\u732a\\u89c2\\u5bdf\", \"user_verified\": false}, \"group_id\": \"6464774526751212046\"}, {\"media_name\": \"BWC\\u4e2d\\u6587\\u7f51\", \"ban_comment\": 0, \"abstract\": \"\\u4e2d\\u56fd\\u4eba\\u6c11\\u94f6\\u884c\\uff08\\u592e\\u884c\\uff09\\u81ea\\u4e0a\\u5468\\u4e94\\uff089\\u67088\\u65e5\\uff09\\u5728\\u4eba\\u6c11\\u5e01\\u5bf9\\u7f8e\\u5143\\u6b63\\u5728\\u8fde\\u7eed\\u5927\\u5e45\\u5347\\u503c\\u4e4b\\u65f6\\uff0c\\u8fde\\u7eed\\u51fa\\u624b\\u8c03\\u6574\\u4e86\\u5bf9\\u6b64\\u524d\\u4eba\\u6c11\\u5e01\\u8d2c\\u503c\\u9884\\u671f\\u8f83\\u5f3a\\u65f6\\u91c7\\u53d6\\u7684\\u4e24\\u9879\\u4e34\\u65f6\\u6027\\u9650\\u5236\\u63aa\\u65bd\\uff0c\\u5373\\u5c06\\u5916\\u6c47\\u98ce\\u9669\\u51c6\\u5907\\u91d1\\u7387\\u4ece20%\\u8c03\\u6574\\u5230\\u96f6\\u548c\\u53d6\\u6d88\\u5bf9\\u5883\\u5916\\u91d1\\u878d\\u673a\\u6784\\u5883\\u5185\\u5b58\\u653e\\u51c6\\u5907\\u91d1\\u7684\\u7a7f\\u900f\\u5f0f\\u7ba1\\u7406\\u3002\", \"image_list\": [{\"url\": \"https://p3.pstatp.com/list/39fc0000a43b24b76c06\", \"width\": 601, \"height\": 338}, {\"url\": \"https://p3.pstatp.com/list/39f70000cc4b19e93adb\", \"width\": 620, \"height\": 348}, {\"url\": \"https://p3.pstatp.com/list/39f90000ba5fe813f68a\", \"width\": 1280, \"height\": 720}], \"datetime\": \"2017-09-12 17:36\", \"article_type\": 0, \"more_mode\": true, \"tag\": \"news_finance\", \"has_m3u8_video\": 0, \"keywords\": \"HSBC,\\u4e2d\\u6587\\u7f51,\\u592e\\u884c,\\u8377\\u5170\\u56fd\\u9645\\u96c6\\u56e2,\\u5347\\u503c,\\u51c6\\u5907\\u91d1\", \"display_dt\": 1505178746, \"has_mp4_video\": 0, \"aggr_type\": 1, \"cell_type\": 0, \"article_sub_type\": 0, \"bury_count\": 0, \"title\": \"\\u5916\\u5a92\\uff1a\\u4e2d\\u56fd\\u4e3a\\u4f55\\u8981\\u624b\\u4e0b\\u7559\\u60c5\\u62ef\\u6551\\u4e00\\u4e0b\\u7f8e\\u5143\\uff1f\", \"source_icon_style\": 5, \"tip\": 0, \"has_video\": false, \"share_url\": \"http://toutiao.com/a6464678820011049486/?iid=0&app=news_article\", \"source\": \"BWC\\u4e2d\\u6587\\u7f51\", \"comment_count\": 320, \"article_url\": \"http://toutiao.com/group/6464678820011049486/\", \"publish_time\": 1505178746, \"group_flags\": 0, \"gallary_image_count\": 8, \"tag_id\": \"6464678820011049486\", \"source_url\": \"/i6464678820011049486/\", \"display_url\": \"http://toutiao.com/group/6464678820011049486/\", \"is_stick\": false, \"item_id\": \"6464678820011049486\", \"repin_count\": 869, \"cell_flag\": 11, \"source_open_url\": \"sslocal://profile?uid=3628653603\", \"level\": 0, \"digg_count\": 0, \"behot_time\": 1505208965, \"hot\": 0, \"cursor\": 1505208965999, \"url\": \"http://toutiao.com/group/6464678820011049486/\", \"user_repin\": 0, \"has_image\": true, \"video_style\": 0, \"media_info\": {\"avatar_url\": \"http://p3.pstatp.com/large/bc3000723916dbde449\", \"media_id\": 4056945349, \"name\": \"BWC\\u4e2d\\u6587\\u7f51\", \"user_verified\": true}, \"group_id\": \"6464678820011049486\"}, {\"media_name\": \"\\u5fc3\\u8a00\\u5fc3\\u8bed\", \"ban_comment\": 0, \"abstract\": \"\\u8428\\u8fbe\\u59c6\\u6b7b\\u540e\\u9057\\u4ea7\\u6709\\u591a\\u5c11\\uff1f\\u4e3a\\u5565\\u7f8e\\u56fd\\u62ff\\u4e0d\\u8d70\\uff1f\\u4ec5\\u6ca1\\u6536\\u5728\\u7f8e\\u56fd\\u7684\\u5341\\u4ebf\\u7f8e\\u91d1\\u81ea\\u53e4\\u4ee5\\u6765\\uff0c\\u6210\\u738b\\u8d25\\u5bc7\\uff0c\\u80dc\\u8005\\u4e3a\\u738b\\uff0c\\u5931\\u8d25\\u8005\\u53ea\\u80fd\\u88ab\\u6dd8\\u6c70\\u3002\\u60f3\\u8d7710\\u5e74\\u524d\\u7684\\u4f0a\\u62c9\\u514b\\uff0c\\u66fe\\u7ecf\\u662f\\u4f55\\u7b49\\u7684\\u8f89\\u714c\\uff0c\\u65e0\\u8bba\\u662f\\u7ecf\\u6d4e\\u8fd8\\u662f\\u56fd\\u529b\\uff0c\\u90fd\\u662f\\u4e16\\u754c\\u6570\\u4e00\\u6570\\u4e8c\\uff0c\\u8bf4\\u662f\\u6700\\u53d1\\u8fbe\\u56fd\\u5bb6\\u4e4b\\u4e00\\u90fd\\u4e0d\\u4e3a\\u8fc7\\u3002\", \"image_list\": [{\"url\": \"https://p3.pstatp.com/list/39f8000233a4ec65675c\", \"width\": 580, \"height\": 326}, {\"url\": \"https://p3.pstatp.com/list/39fe00004008d2c72e1c\", \"width\": 635, \"height\": 357}, {\"url\": \"https://p3.pstatp.com/list/39fc000218a3367622c9\", \"width\": 580, \"height\": 326}], \"datetime\": \"2017-09-12 17:28\", \"article_type\": 0, \"more_mode\": true, \"tag\": \"news_world\", \"has_m3u8_video\": 0, \"keywords\": \"\\u7f8e\\u56fd,\\u7f8e\\u56fd\\u5927\\u5175,\\u9ec4\\u91d1,\\u51fa\\u5175\\u4f0a\\u62c9\\u514b,\\u6c34\\u6676,\\u8428\\u8fbe\\u59c6\", \"display_dt\": 1505201409, \"has_mp4_video\": 0, \"aggr_type\": 1, \"cell_type\": 0, \"article_sub_type\": 0, \"bury_count\": 0, \"title\": \"\\u8428\\u8fbe\\u59c6\\u6b7b\\u540e\\u9057\\u4ea7\\u6709\\u591a\\u5c11\\uff1f\\u4e3a\\u5565\\u7f8e\\u56fd\\u62ff\\u4e0d\\u8d70\\uff1f\\u4ec5\\u6ca1\\u6536\\u5728\\u7f8e\\u56fd\\u7684\\u5341\\u4ebf\\u7f8e\\u91d1\", \"source_icon_style\": 2, \"tip\": 0, \"has_video\": false, \"share_url\": \"http://toutiao.com/a6464790827297145357/?iid=0&app=news_article\", \"source\": \"\\u5fc3\\u8a00\\u5fc3\\u8bed\", \"comment_count\": 43, \"article_url\": \"http://toutiao.com/group/6464790827297145357/\", \"publish_time\": 1505201409, \"group_flags\": 0, \"gallary_image_count\": 5, \"tag_id\": \"6464790827297145357\", \"source_url\": \"/i6464790827297145357/\", \"display_url\": \"http://toutiao.com/group/6464790827297145357/\", \"is_stick\": false, \"item_id\": \"6464790827297145357\", \"repin_count\": 343, \"cell_flag\": 11, \"source_open_url\": \"sslocal://profile?uid=53215295945\", \"level\": 0, \"digg_count\": 0, \"behot_time\": 1505208515, \"hot\": 0, \"cursor\": 1505208515999, \"url\": \"http://toutiao.com/group/6464790827297145357/\", \"user_repin\": 0, \"has_image\": true, \"video_style\": 0, \"media_info\": {\"avatar_url\": \"http://p3.pstatp.com/large/123400143b5a5b8942ac\", \"media_id\": 1554605722604545, \"name\": \"\\u5fc3\\u8a00\\u5fc3\\u8bed\", \"user_verified\": true}, \"group_id\": \"6464790827297145357\"}, {\"media_name\": \"\\u65b0\\u95fb\\u770b\\u70b9\", \"ban_comment\": 1, \"abstract\": \"\\u636e\\u6e2f\\u5a92\\u62a5\\u9053\\uff0c\\u8054\\u5408\\u56fd15\\u4e2a\\u6210\\u5458\\u56fd\\u5468\\u4e8c\\uff0812\\u65e5\\uff09\\u4e00\\u81f4\\u901a\\u8fc7\\u8fdb\\u4e00\\u6b65\\u5236\\u88c1\\u671d\\u9c9c\\uff0c\\u671d\\u9c9c\\u534a\\u5c9b\\u5c40\\u52bf\\u5c06\\u5347\\u6e29\\u3002\\u671d\\u9c9c\\u5b98\\u5a92\\u62a5\\u9053\\uff0c\\u9886\\u8896\\u91d1\\u6b63\\u6069\\u5f53\\u65e5\\u5728\\u5e73\\u58e4\\u63a5\\u89c1\\u4e00\\u6279\\u81ea\\u613f\\u524d\\u5f80\\u5c71\\u533a\\u53ca\\u5c9b\\u5c7f\\u7b49\\u504f\\u8fdc\\u5730\\u533a\\u6559\\u4e66\\u7684\\u8001\\u5e08\\uff0c\\u5e76\\u548c\\u4f17\\u4eba\\u62cd\\u7167\\u7559\\u5ff5\\uff0c\\u671f\\u95f4\\u53d7\\u5230\\u70ed\\u70c8\\u6b22\\u8fce\\u3002\", \"image_list\": [], \"datetime\": \"2017-09-12 17:21\", \"article_type\": 0, \"tag\": \"news_world\", \"has_m3u8_video\": 0, \"keywords\": \"\\u91d1\\u6b63\\u6069,\\u5c71\\u533a,\\u8054\\u5408\\u56fd,\\u6559\\u5e08,\\u671d\\u9c9c\", \"display_dt\": 1505195802, \"has_mp4_video\": 0, \"aggr_type\": 1, \"cell_type\": 0, \"article_sub_type\": 0, \"bury_count\": 0, \"title\": \"\\u4e0d\\u7406\\u8054\\u5408\\u56fd\\u5236\\u88c1\\u671d\\u9c9c\\u65b0\\u51b3\\u8bae \\u91d1\\u6b63\\u6069\\u6109\\u5feb\\u63a5\\u89c1\\u5c71\\u533a\\u6559\\u5e08\", \"source_icon_style\": 2, \"tip\": 0, \"has_video\": false, \"share_url\": \"http://toutiao.com/a6464766744916394509/?iid=0&app=news_article\", \"source\": \"\\u65b0\\u95fb\\u770b\\u70b9\", \"comment_count\": 10, \"article_url\": \"http://toutiao.com/group/6464766744916394509/\", \"publish_time\": 1505195802, \"group_flags\": 0, \"middle_mode\": true, \"gallary_image_count\": 1, \"tag_id\": \"6464766744916394509\", \"source_url\": \"/i6464766744916394509/\", \"display_url\": \"http://toutiao.com/group/6464766744916394509/\", \"is_stick\": false, \"item_id\": \"6464766744916394509\", \"repin_count\": 292, \"cell_flag\": 11, \"source_open_url\": \"sslocal://profile?uid=17373605278\", \"level\": 0, \"digg_count\": 1, \"behot_time\": 1505208065, \"hot\": 0, \"cursor\": 1505208065999, \"url\": \"http://toutiao.com/group/6464766744916394509/\", \"like_count\": 1, \"image_url\": \"https://p3.pstatp.com/list/39f70001db7ec1e7e65b\", \"user_repin\": 0, \"has_image\": true, \"video_style\": 0, \"media_info\": {\"avatar_url\": \"http://p2.pstatp.com/large/382c0018dae63835a39d\", \"media_id\": 1573876562355214, \"name\": \"\\u65b0\\u95fb\\u770b\\u70b9\", \"user_verified\": false}, \"group_id\": \"6464766744916394509\"}, {\"media_name\": \"\\u4e2d\\u5916\\u5386\\u53f2\\u89c2\", \"ban_comment\": 0, \"abstract\": \"\\u5728\\u56fd\\u5bb6\\u975e\\u7269\\u8d28\\u6587\\u5316\\u9057\\u4ea7\\uff08\\u6c11\\u95f4\\u4f20\\u8bf4\\u6587\\u5b66\\uff09\\u4e2d\\uff1a\\u5f90\\u798f\\u4e1c\\u6e21\\u65e5\\u672c\\u7684\\u4f20\\u8bf4\\u88ab\\u7eb3\\u5165\\u5176\\u4e2d\\uff0c\\u6839\\u636e\\u300a\\u53f2\\u8bb0\\u300b\\u8bb0\\u8f7d\\uff0c\\u5f90\\u798f\\u643a\\u53c1\\u4edf\\u7ae5\\u7537\\u7ae5\\u5973\\u4e3a\\u79e6\\u59cb\\u6e21\\u6d77\\u5bfb\\u6c42\\u4e0d\\u8001\\u4ed9\\u4e39\\uff0c\\u4f20\\u8bf4\\u5f90\\u798f\\u4e00\\u884c\\u4eba\\u662f\\u4ece\\u4eca\\u5929\\u7684\\u6d59\\u6c5f\\u6148\\u6eaa\\u4f5c\\u4e3a\\u51fa\\u53d1\\u70b9\\uff0c\\u4f46\\u5728\\u6e21\\u6d77\\u6c42\\u4e39\\u9014\\u4e2d\\u56e0\\u4e3a\\u4e00\\u65e0\\u6240\\u83b7\\u6050\\u6015\\u56de\\u56fd\\u88ab\\u66b4\\u653f\\u7684\\u79e6\\u59cb\\u7687\\u6740\\u5bb3\\uff0c\\u6240\\u4ee5\\u4e5f\\u6ca1\\u6562\\u56de\\u56fd\\uff0c\\u4e8e\\u662f\\u5c31\\u8f97\\u8f6c\\u5230\\u4eca\\u5c71\\u4e1c\\u5d02\\u5c71\\u4e00\\u5e26\\uff0c\\u9690\\u540d\\u6539\", \"image_list\": [{\"url\": \"https://p3.pstatp.com/list/39b3000290dcbb0599f0\", \"width\": 640, \"height\": 360}, {\"url\": \"https://p3.pstatp.com/list/39b3000291330aa452fe\", \"width\": 640, \"height\": 360}, {\"url\": \"https://p3.pstatp.com/list/39b400027a822c4ca444\", \"width\": 640, \"height\": 360}], \"datetime\": \"2017-09-12 17:13\", \"article_type\": 0, \"more_mode\": true, \"tag\": \"news_history\", \"has_m3u8_video\": 0, \"keywords\": \"\\u795e\\u6b66\\u5929\\u7687,\\u65e5\\u672c\\u4e66\\u8bb0,\\u5bab\\u4e0b\\u5bcc\\u58eb\\u53e4\\u6587\\u4e66,\\u5f90\\u798f,\\u5929\\u7687,\\u65e5\\u672c,\\u79e6\\u59cb\\u7687\", \"display_dt\": 1504894465, \"has_mp4_video\": 0, \"aggr_type\": 1, \"cell_type\": 0, \"article_sub_type\": 0, \"bury_count\": 0, \"title\": \"\\u65e5\\u672c\\u9996\\u76f8\\u627f\\u8ba4\\u662f\\u4e2d\\u56fd\\u540e\\u4ee3\\uff0c\\u8fd9\\u4e09\\u4eba\\u4e5f\\u5145\\u5206\\u8bc1\\u5b9e\\uff0c\\u53ef\\u97e9\\u56fd\\u8fd8\\u5047\\u88c5\\u7cca\\u6d82\", \"source_icon_style\": 4, \"tip\": 0, \"has_video\": false, \"share_url\": \"http://toutiao.com/a6463420640849297933/?iid=0&app=news_article\", \"source\": \"\\u4e2d\\u5916\\u5386\\u53f2\\u89c2\", \"comment_count\": 65, \"article_url\": \"http://toutiao.com/group/6463420640849297933/\", \"publish_time\": 1504894465, \"group_flags\": 0, \"gallary_image_count\": 5, \"tag_id\": \"6463420640849297933\", \"source_url\": \"/i6463420640849297933/\", \"display_url\": \"http://toutiao.com/group/6463420640849297933/\", \"is_stick\": false, \"item_id\": \"6463420640849297933\", \"repin_count\": 1162, \"cell_flag\": 11, \"source_open_url\": \"sslocal://profile?uid=6643665187\", \"level\": 0, \"digg_count\": 0, \"behot_time\": 1505207615, \"hot\": 0, \"cursor\": 1505207615999, \"url\": \"http://toutiao.com/group/6463420640849297933/\", \"user_repin\": 0, \"has_image\": true, \"video_style\": 0, \"media_info\": {\"avatar_url\": \"http://p4.pstatp.com/large/382f0000f81b197ac423\", \"media_id\": 6643303968, \"name\": \"\\u4e2d\\u5916\\u5386\\u53f2\\u89c2\", \"user_verified\": true}, \"group_id\": \"6463420640849297933\"}, {\"log_extra\": \"{\\\"external_action\\\": 0, \\\"rit\\\": 1, \\\"convert_id\\\": 0, \\\"req_id\\\": \\\"30953211505211215528\\\", \\\"ad_price\\\": \\\"Wbe8dAABgSdZt7x0AAGBJ_rqHIh8D3ot50eBfA\\\"}\", \"ban_comment\": 1, \"abstract\": \"\", \"image_list\": [{\"url\": \"https://p3.pstatp.com/list/38b7000b4107bbcbef4a\", \"width\": 228, \"height\": 128}, {\"url\": \"https://p3.pstatp.com/list/38b7000b4109998d072a\", \"width\": 228, \"height\": 128}, {\"url\": \"https://p3.pstatp.com/list/38bb0001902ba7415979\", \"width\": 228, \"height\": 128}], \"datetime\": \"2017-09-12 17:06\", \"article_type\": 1, \"more_mode\": true, \"tag\": \"ad\", \"display_info\": \"\\u518d\\u9886\\u4e00\\u5f20\\uff01ofo\\u6708\\u5361\\u53ef\\u4ee5\\u91cd\\u590d\\u9886\\u4e86\\uff0c\\u4ec5\\u9650\\u5468\\u672b\\uff01\", \"has_m3u8_video\": 0, \"display_dt\": 1505114609, \"has_mp4_video\": 0, \"aggr_type\": 1, \"expire_seconds\": 315689840, \"cell_type\": 0, \"article_sub_type\": 0, \"bury_count\": 0, \"title\": \"\\u518d\\u9886\\u4e00\\u5f20\\uff01ofo\\u6708\\u5361\\u53ef\\u4ee5\\u91cd\\u590d\\u9886\\u4e86\\uff0c\\u4ec5\\u9650\\u5468\\u672b\\uff01\", \"source_icon_style\": 3, \"tip\": 0, \"has_video\": false, \"share_url\": \"http://toutiao.com/group/6464418023749976334/?iid=0&app=news_article\", \"label\": \"\\u5e7f\\u544a\", \"source\": \"ofo-1\\u5143\\u5305\\u6708\", \"comment_count\": 0, \"article_url\": \"https://common.ofo.so/newdist/?MouthCardPage&channel=33982_1504171760189&type=2&duringType=1&subType=97921891&channelPage=page2&fromcity=1\", \"publish_time\": 1505114609, \"ad_id\": 68715727350, \"group_flags\": 4096, \"has_image\": false, \"tag_id\": \"6464418023749976334\", \"source_url\": \"/item/6464418023749976334/\", \"display_url\": \"https://common.ofo.so/newdist/?MouthCardPage&channel=33982_1504171760189&type=2&duringType=1&subType=97921891&channelPage=page2&fromcity=1\", \"is_stick\": false, \"item_id\": \"6464418023749976334\", \"repin_count\": 8, \"cell_flag\": 10, \"source_open_url\": \"sslocal://search?from=feed_source&keyword=ofo-1%E5%85%83%E5%8C%85%E6%9C%88\", \"level\": 0, \"digg_count\": 0, \"behot_time\": 1505207165, \"hot\": 0, \"cursor\": 1505207165999, \"url\": \"https://common.ofo.so/newdist/?MouthCardPage&channel=33982_1504171760189&type=2&duringType=1&subType=97921891&channelPage=page2&fromcity=1\", \"ad_label\": \"\\u5e7f\\u544a\", \"user_repin\": 0, \"label_style\": 3, \"video_style\": 0, \"group_id\": \"6464418023749976334\"}, {\"media_name\": \"\\u5386\\u53f2\\u70b9\\u6ef4\", \"ban_comment\": 0, \"abstract\": \"\\u53ef\\u80fd\\u5927\\u5bb6\\u90fd\\u770b\\u8fc7\\u6e05\\u671d\\u7684\\u7535\\u89c6\\u5267\\u5427\\uff0c\\u5176\\u4e2d\\u4e00\\u4e2a\\u4eba\\u5341\\u5206\\u6709\\u540d\\uff0c\\u90a3\\u5c31\\u662f\\u9b4f\\u4e1c\\u4ead\\uff0c\\u9b4f\\u4e1c\\u4ead\\u548c\\u5eb7\\u7199\\u4ece\\u5c0f\\u4e00\\u8d77\\u957f\\u5927\\uff0c\\u540e\\u6765\\u5e2e\\u52a9\\u5eb7\\u7199\\u505a\\u5f88\\u591a\\u4e8b\\u60c5\\uff0c\\u518d\\u5230\\u6700\\u540e\\u88ab\\u8d2c\\u5230\\u53f0\\u6e7e\\u505a\\u77e5\\u53bf\\u3002\\u4f46\\u662f\\u9b4f\\u4e1c\\u4ead\\u8fd9\\u4e2a\\u4eba\\u5386\\u53f2\\u4e0a\\u662f\\u4e0d\\u5b58\\u5728\\u7684\\uff0c\\u4f60\\u53ef\\u80fd\\u4f1a\\u5341\\u5206\\u60ca\\u8bb6\\uff0c\\u5176\\u5b9e\\u9b4f\\u4e1c\\u4ead\\u7684\\u539f\\u578b\\u5c31\\u662f\\u5927\\u540d\\u9f0e\\u9f0e\\u7684\\u66f9\\u5bc5\\u3002\", \"image_list\": [{\"url\": \"https://p3.pstatp.com/list/39f600048a2d1cef3f37\", \"width\": 580, \"height\": 326}, {\"url\": \"https://p3.pstatp.com/list/39fb00012d33d59f00ef\", \"width\": 640, \"height\": 360}, {\"url\": \"https://p3.pstatp.com/list/39f80001395f48d1b6f9\", \"width\": 1280, \"height\": 720}], \"datetime\": \"2017-09-12 16:58\", \"article_type\": 0, \"more_mode\": true, \"tag\": \"news_history\", \"has_m3u8_video\": 0, \"keywords\": \"\\u66f9\\u6c0f\\u5bb6\\u65cf,\\u7ea2\\u697c\\u68a6,\\u66f9\\u5bc5,\\u66f9\\u73ba,\\u9b4f\\u4e1c\\u4ead,\\u5eb7\\u7199\", \"display_dt\": 1505184519, \"has_mp4_video\": 0, \"aggr_type\": 1, \"cell_type\": 0, \"article_sub_type\": 0, \"bury_count\": 0, \"title\": \"\\u5eb7\\u7199\\u5bf9\\u4ed6\\u8bf4\\uff0c\\u53ea\\u8981\\u5927\\u6e05\\u4e0d\\u706d\\uff0c\\u4fdd\\u4f60\\u6c38\\u4e16\\u8363\\u534e\\uff0c\\u96cd\\u6b63\\u4e00\\u4e0a\\u53f0\\u5c31\\u6284\\u4e86\\u4ed6\\u5bb6\", \"source_icon_style\": 4, \"tip\": 0, \"has_video\": false, \"share_url\": \"http://toutiao.com/a6464718285303710222/?iid=0&app=news_article\", \"source\": \"\\u5386\\u53f2\\u70b9\\u6ef4\", \"comment_count\": 61, \"article_url\": \"http://toutiao.com/group/6464718285303710222/\", \"publish_time\": 1505184519, \"group_flags\": 0, \"gallary_image_count\": 3, \"tag_id\": \"6464718285303710222\", \"source_url\": \"/i6464718285303710222/\", \"display_url\": \"http://toutiao.com/group/6464718285303710222/\", \"is_stick\": false, \"item_id\": \"6464718285303710222\", \"repin_count\": 381, \"cell_flag\": 11, \"source_open_url\": \"sslocal://profile?uid=52457494930\", \"level\": 0, \"digg_count\": 0, \"behot_time\": 1505206715, \"hot\": 0, \"cursor\": 1505206715999, \"url\": \"http://toutiao.com/group/6464718285303710222/\", \"user_repin\": 0, \"has_image\": true, \"video_style\": 0, \"media_info\": {\"avatar_url\": \"http://p1.pstatp.com/large/1234000ed85e81b12bbe\", \"media_id\": 1553942419337217, \"name\": \"\\u5386\\u53f2\\u70b9\\u6ef4\", \"user_verified\": false}, \"group_id\": \"6464718285303710222\"}, {\"media_name\": \"\\u8fa3\\u5b50\\u9e21\\u5b66\\u5802\", \"ban_comment\": 0, \"abstract\": \"\\u65e5\\u524d\\uff0c\\u82f1\\u56fd\\u300a\\u91d1\\u878d\\u65f6\\u62a5\\u300b\\u7f51\\u7ad9\\u53d1\\u8868\\u6587\\u7ae0\\u79f0\\uff0c\\u5728\\u6781\\u529b\\u7684\\u8ffd\\u8d76\\u4e0b\\uff0c\\u4e2d\\u56fd\\u5df2\\u7ecf\\u5c06\\u7f8e\\u56fd\\u7529\\u5728\\u540e\\u9762\\u4e86\\uff0c\\u5728\\u8bf8\\u591a\\u9886\\u57df\\uff0c\\u4f8b\\u5982\\u79fb\\u52a8\\u652f\\u4ed8\\u3001\\u5171\\u4eab\\u5355\\u8f66\\u3001\\u9ad8\\u94c1\\u3001\\u6559\\u80b2\\u7684\\u6295\\u5165\\u3001\\u5305\\u62ec\\u5bf9\\u672a\\u6765\\u7684\\u89c4\\u5212\\u4e2d\\u56fd\\u5df2\\u7ecf\\u5927\\u5e45\\u9886\\u5148\\uff0c\\u800c\\u7f8e\\u56fd\\u5374\\u8fd8\\u60f3\\u5f80\\u56de\\u8d70\\uff0c\\u5012\\u9000\\u5386\\u53f2\\u3002\\u6587\\u7ae0\\u79f0\\uff0c\\u53ea\\u8981\\u5728\\u4e2d\\u56fd\\u5f85\\u4e0a\\u4e00\\u5468\\uff0c\\u5c31\\u8db3\\u4ee5\\u8bf4\\u670d\\u4efb\\u4f55\\u4eba\\uff0c\\u8fd9\\u4e2a\\u4e16\\u754c\\u5df2\\u7ecf\\u98a0\\u5012\\u3002\", \"image_list\": [{\"url\": \"https://p3.pstatp.com/list/39fd00004618e2cd3a7a\", \"width\": 580, \"height\": 326}, {\"url\": \"https://p3.pstatp.com/list/39f700022ef40cdf2e3b\", \"width\": 1120, \"height\": 630}, {\"url\": \"https://p3.pstatp.com/list/39fd00004617ad4252da\", \"width\": 600, \"height\": 337}], \"datetime\": \"2017-09-12 16:43\", \"article_type\": 0, \"more_mode\": true, \"tag\": \"news\", \"has_m3u8_video\": 0, \"keywords\": \"\\u963f\\u91cc\\u5df4\\u5df4,\\u52a0\\u5229\\u798f\\u5c3c\\u4e9a\\u5dde,\\u65e0\\u4eba\\u673a,\\u652f\\u4ed8\\u5b9d,\\u673a\\u5668\\u4eba\", \"display_dt\": 1505200755, \"has_mp4_video\": 0, \"aggr_type\": 1, \"cell_type\": 0, \"article_sub_type\": 0, \"bury_count\": 0, \"title\": \"\\u82f1\\u5a92\\uff1a\\u4e2d\\u56fd\\u591a\\u9886\\u57df\\u5c06\\u7f8e\\u56fd\\u7529\\u8eab\\u540e\\uff0c\\u5f88\\u591a\\u4e1c\\u897f\\u503c\\u5f97\\u897f\\u65b9\\u5b66\\u4e60\", \"source_icon_style\": 5, \"tip\": 0, \"has_video\": false, \"share_url\": \"http://toutiao.com/a6464788016916349453/?iid=0&app=news_article\", \"source\": \"\\u8fa3\\u5b50\\u9e21\\u5b66\\u5802\", \"comment_count\": 48, \"article_url\": \"http://toutiao.com/group/6464788016916349453/\", \"publish_time\": 1505200755, \"group_flags\": 0, \"gallary_image_count\": 6, \"tag_id\": \"6464788016916349453\", \"source_url\": \"/i6464788016916349453/\", \"display_url\": \"http://toutiao.com/group/6464788016916349453/\", \"is_stick\": false, \"item_id\": \"6464788016916349453\", \"repin_count\": 80, \"cell_flag\": 11, \"source_open_url\": \"sslocal://profile?uid=56061349316\", \"level\": 0, \"digg_count\": 0, \"behot_time\": 1505205815, \"hot\": 0, \"cursor\": 1505205815999, \"url\": \"http://toutiao.com/group/6464788016916349453/\", \"user_repin\": 0, \"has_image\": true, \"video_style\": 0, \"media_info\": {\"avatar_url\": \"http://p3.pstatp.com/large/2c65000117c961f8cc9c\", \"media_id\": 1560199066568705, \"name\": \"\\u8fa3\\u5b50\\u9e21\\u5b66\\u5802\", \"user_verified\": false}, \"group_id\": \"6464788016916349453\"}, {\"media_name\": \"\\u9e3f\\u5112\\u8c08\\u5929\\u4e0b\", \"ban_comment\": 0, \"abstract\": \"\\u6148\\u79a7\\u592a\\u540e\\u5c11\\u5e74\\u8fdb\\u5bab\\uff0c\\u540e\\u6765\\u88ab\\u54b8\\u4e30\\u7687\\u5e1d\\u770b\\u4e2d\\uff0c\\u7531\\u4f8d\\u5973\\u53d8\\u6210\\u4e86\\u540e\\u6765\\u6743\\u503e\\u4e00\\u65f6\\u7684\\u6148\\u79a7\\u592a\\u540e\\uff0c\\u6210\\u4e3a\\u4e86\\u5973\\u4eba\\u773c\\u4e2d\\u7684\\u5178\\u8303\\uff0c\\u7537\\u4eba\\u773c\\u4e2d\\u7684\\u7ea2\\u989c\\u7978\\u6c34\\uff0c\\u4e0d\\u5f97\\u4e0d\\u8bf4\\u6148\\u79a7\\u592a\\u540e\\u7684\\u653f\\u6cbb\\u5934\\u8111\\u548c\\u624b\\u6bb5\\u5b9e\\u5728\\u662f\\u975e\\u5e38\\u9ad8\\u8d85\\uff0c\\u5728\\u540e\\u5bab\\u4f17\\u591a\\u5983\\u5ad4\\u4e2d\\u8131\\u9896\\u800c\\u51fa\\uff0c\\u800c\\u4e14\\u8fd8\\u5c06\\u90a3\\u4e48\\u591a\\u7537\\u4eba\\u8e29\\u5728\\u811a\\u4e0b\\uff0c\\u5b9e\\u5728\\u662f\\u5973\\u5f3a\\u4eba\\u4e2d\\u7684\\u4f7c\\u4f7c\\u8005\\uff0c\\u4f46\\u662f\\u4f5c\\u4e3a\\u4e00\\u4e2a\\u653f\\u6cbb\\u4e0a\\u7684\\u5973\\u5f3a\\u4eba\\u8981\\u4ed8\\u51fa\\u7684\\u4ee3\\u4ef7\", \"image_list\": [{\"url\": \"https://p3.pstatp.com/list/39fe000074e8c6755c25\", \"width\": 300, \"height\": 168}, {\"url\": \"https://p3.pstatp.com/list/39fc00024dbee6ddc40b\", \"width\": 495, \"height\": 278}, {\"url\": \"https://p3.pstatp.com/list/39f700026fc40ed84714\", \"width\": 294, \"height\": 165}], \"datetime\": \"2017-09-12 16:36\", \"article_type\": 0, \"more_mode\": true, \"tag\": \"news_history\", \"has_m3u8_video\": 0, \"keywords\": \"\\u9053\\u5149,\\u9053\\u5149\\u7687\\u5e1d,\\u6148\\u79a7,\\u6148\\u79a7\\u592a\\u540e,\\u54b8\\u4e30\\u7687\\u5e1d\", \"display_dt\": 1505204189, \"has_mp4_video\": 0, \"aggr_type\": 1, \"cell_type\": 0, \"article_sub_type\": 0, \"bury_count\": 0, \"title\": \"\\u6148\\u79a7\\u592a\\u540e\\u6700\\u7231\\u7684\\u4e00\\u4e2a\\u7537\\u4eba\\uff0c\\u751f\\u524d\\u65e0\\u7f18\\uff0c\\u6b7b\\u540e\\u4e3a\\u5176\\u75db\\u54ed\\uff01\", \"source_icon_style\": 5, \"tip\": 0, \"has_video\": false, \"share_url\": \"http://toutiao.com/a6464802764613485069/?iid=0&app=news_article\", \"source\": \"\\u9e3f\\u5112\\u8c08\\u5929\\u4e0b\", \"comment_count\": 3, \"article_url\": \"http://toutiao.com/group/6464802764613485069/\", \"publish_time\": 1505204189, \"group_flags\": 0, \"gallary_image_count\": 4, \"tag_id\": \"6464802764613485069\", \"source_url\": \"/i6464802764613485069/\", \"display_url\": \"http://toutiao.com/group/6464802764613485069/\", \"is_stick\": false, \"item_id\": \"6464802764613485069\", \"repin_count\": 12, \"cell_flag\": 11, \"source_open_url\": \"sslocal://profile?uid=52196225931\", \"level\": 0, \"digg_count\": 0, \"behot_time\": 1505205365, \"hot\": 0, \"cursor\": 1505205365999, \"url\": \"http://toutiao.com/group/6464802764613485069/\", \"user_repin\": 0, \"has_image\": true, \"video_style\": 0, \"media_info\": {\"avatar_url\": \"http://p3.pstatp.com/large/ef6000ff93eba061e32\", \"media_id\": 52196402852, \"name\": \"\\u9e3f\\u5112\\u8c08\\u5929\\u4e0b\", \"user_verified\": false}, \"group_id\": \"6464802764613485069\"}, {\"media_name\": \"\\u5386\\u53f2\\u540d\\u4eba\\u5c0f\\u4f20\", \"ban_comment\": 0, \"abstract\": \"\\u76f8\\u4fe1\\u6709\\u5fc3\\u7684\\u670b\\u53cb\\u90fd\\u4f1a\\u53d1\\u73b0\\uff0c\\u5728\\u81ea\\u5df1\\u8eab\\u8fb9\\uff0c\\u603b\\u6709\\u90a3\\u4e48\\u4e00\\u4e24\\u4e2a30\\u5c81\\u51fa\\u5934\\uff0c\\u4e0d\\u61a8\\u4e0d\\u50bb\\uff0c\\u4e0d\\u61d2\\u4e0d\\u6b8b\\u7684\\u670b\\u53cb\\uff0c\\u4ec0\\u4e48\\u90fd\\u597d\\uff0c\\u5c31\\u662f\\u6ca1\\u6709\\u5ab3\\u5987\\uff0c\\u751a\\u81f3\\u8fde\\u4e2a\\u5973\\u670b\\u53cb\\u90fd\\u6ca1\\u6709\\uff0c\\u5047\\u5982\\u662f\\u5728\\u7ecf\\u6d4e\\u76f8\\u5bf9\\u843d\\u540e\\u7684\\u504f\\u8fdc\\u5730\\u533a\\uff0c\\u8fd9\\u79cd\\u7fa4\\u4f53\\u7684\\u4eba\\u6570\\u4f1a\\u66f4\\u591a\\uff01\", \"image_list\": [{\"url\": \"https://p3.pstatp.com/list/39fc0000bd428f9839e6\", \"width\": 897, \"height\": 504}, {\"url\": \"https://p3.pstatp.com/list/39f70000dfb005a68063\", \"width\": 901, \"height\": 506}, {\"url\": \"https://p3.pstatp.com/list/39fc0000bd459aaf4446\", \"width\": 500, \"height\": 281}], \"datetime\": \"2017-09-12 16:28\", \"article_type\": 0, \"more_mode\": true, \"tag\": \"news_history\", \"has_m3u8_video\": 0, \"keywords\": \"\\u5149\\u68cd,\\u5510\\u592a\\u5b97,\\u519c\\u6751,\\u5510\\u592a\\u5b97\\u674e\\u4e16\\u6c11,\\u5357\\u5317\\u671d\\u65f6\\u671f\", \"display_dt\": 1505180043, \"has_mp4_video\": 0, \"aggr_type\": 1, \"cell_type\": 0, \"article_sub_type\": 0, \"bury_count\": 0, \"title\": \"\\u4e2d\\u56fd\\u504f\\u8fdc\\u5730\\u533a\\u519c\\u6751\\u5149\\u68cd2000\\u4e07\\uff0c\\u5a36\\u4e0d\\u4e0a\\u5ab3\\u5987\\u548b\\u529e\\uff1f\\u53e4\\u4eba\\u6559\\u4e86\\u6211\\u4eec\\u4e09\\u62db\", \"source_icon_style\": 4, \"tip\": 0, \"has_video\": false, \"share_url\": \"http://toutiao.com/a6464755659555471629/?iid=0&app=news_article\", \"source\": \"\\u5386\\u53f2\\u540d\\u4eba\\u5c0f\\u4f20\", \"comment_count\": 238, \"article_url\": \"http://toutiao.com/group/6464755659555471629/\", \"publish_time\": 1505180043, \"group_flags\": 0, \"gallary_image_count\": 5, \"tag_id\": \"6464755659555471629\", \"source_url\": \"/i6464697950202233357/\", \"display_url\": \"http://toutiao.com/group/6464755659555471629/\", \"is_stick\": false, \"item_id\": \"6464697950202233357\", \"repin_count\": 387, \"cell_flag\": 11, \"source_open_url\": \"sslocal://profile?uid=52885318078\", \"level\": 0, \"digg_count\": 0, \"behot_time\": 1505204915, \"hot\": 0, \"cursor\": 1505204915999, \"url\": \"http://toutiao.com/group/6464755659555471629/\", \"user_repin\": 0, \"has_image\": true, \"video_style\": 0, \"media_info\": {\"avatar_url\": \"http://p3.pstatp.com/large/1232000c8502304af256\", \"media_id\": 1553677272796161, \"name\": \"\\u5386\\u53f2\\u540d\\u4eba\\u5c0f\\u4f20\", \"user_verified\": true}, \"group_id\": \"6464755659555471629\"}, {\"media_name\": \"\\u8001\\u738b\\u8bfb\\u4e16\\u754c\", \"ban_comment\": 0, \"abstract\": \"\\u201c\\u5efa\\u56fd\\u65e5\\u201d\\u672c\\u662f\\u4e3e\\u56fd\\u6b22\\u5e86\\u7684\\u65e5\\u5b50\\uff0c\\u4f46\\u4e2d\\u4e1c\\u4e00\\u4e2a\\u56fd\\u5bb6\\u5374\\u9ad8\\u5174\\u4e0d\\u8d77\\u6765\\uff0c\\u81ea\\u5df1\\u521a\\u8bf4\\u8981\\u5efa\\u56fd\\uff0c\\u5c31\\u88ab\\u4e94\\u4e2a\\u90bb\\u5c45\\u8054\\u5408\\u8d77\\u6765\\u66b4\\u6253\\uff0c\\u82e5\\u4e0d\\u662f\\u7f8e\\u82cf\\u7d27\\u6025\\u8c03\\u548c\\uff0c\\u4f30\\u8ba1\\u81ea\\u5df1\\u5efa\\u56fd\\u4e00\\u5929\\u5c31\\u4ea1\\u56fd\\u4e86\\u3002\\u6b64\\u56fd\\u4fbf\\u662f\\u4ee5\\u8272\\u5217\\u3002\", \"image_list\": [{\"url\": \"https://p3.pstatp.com/list/39aa0002cd5055d9172a\", \"width\": 507, \"height\": 285}, {\"url\": \"https://p3.pstatp.com/list/39b20000bb50d9883a2a\", \"width\": 446, \"height\": 250}, {\"url\": \"https://p3.pstatp.com/list/39ac0002b11427192021\", \"width\": 399, \"height\": 224}], \"datetime\": \"2017-09-12 16:28\", \"article_type\": 0, \"more_mode\": true, \"tag\": \"news_history\", \"has_m3u8_video\": 0, \"keywords\": \"\\u4ee5\\u8272\\u5217,\\u5df4\\u52d2\\u65af\\u5766,\\u963f\\u62c9\\u4f2f\\u4eba,\\u963f\\u62c9\\u4f2f,\\u72b9\\u592a\\u4eba\", \"display_dt\": 1504768834, \"has_mp4_video\": 0, \"aggr_type\": 1, \"cell_type\": 0, \"article_sub_type\": 0, \"bury_count\": 2, \"title\": \"\\u4e00\\u56fd\\u521a\\u8bf4\\u81ea\\u5df1\\u8981\\u5efa\\u56fd\\uff0c\\u7acb\\u9a6c\\u62db\\u6765\\u4e94\\u4e2a\\u90bb\\u56fd\\u66b4\\u63cd\\uff0c\\u5dee\\u70b9\\u5efa\\u56fd\\u4e00\\u5929\\u5c31\\u4ea1\\u56fd\", \"source_icon_style\": 1, \"tip\": 0, \"has_video\": false, \"share_url\": \"http://toutiao.com/a6462932931097657870/?iid=0&app=news_article\", \"source\": \"\\u8001\\u738b\\u8bfb\\u4e16\\u754c\", \"comment_count\": 45, \"article_url\": \"http://toutiao.com/group/6462932931097657870/\", \"publish_time\": 1504768834, \"group_flags\": 0, \"gallary_image_count\": 3, \"tag_id\": \"6462932931097657870\", \"source_url\": \"/i6462932931097657870/\", \"display_url\": \"http://toutiao.com/group/6462932931097657870/\", \"is_stick\": false, \"item_id\": \"6462932931097657870\", \"repin_count\": 494, \"cell_flag\": 11, \"source_open_url\": \"sslocal://profile?uid=51207625746\", \"level\": 0, \"digg_count\": 0, \"behot_time\": 1505204915, \"hot\": 0, \"cursor\": 1505204915998, \"url\": \"http://toutiao.com/group/6462932931097657870/\", \"user_repin\": 0, \"has_image\": true, \"video_style\": 0, \"media_info\": {\"avatar_url\": \"http://p1.pstatp.com/large/1234000282c61e6757ef\", \"media_id\": 51203863296, \"name\": \"\\u8001\\u738b\\u8bfb\\u4e16\\u754c\", \"user_verified\": true}, \"group_id\": \"6462932931097657870\"}]}");
//        		System.out.println("media_name=" + new JsonPathSelector("$.data.media_name").select(page.getRawText()));
//            page.putField("title", new JsonPathSelector("$.data.title").select(page.getRawText()));
//            page.putField("label", new JsonPathSelector("$.data.label").select(page.getRawText()));
        		String json = page.getRawText();
	        	System.out.println("第一层解析...");
	    		System.out.println("success=" + new JsonPathSelector("$.success").select(json));
	    		List<String> data = new JsonPathSelector("$.data").selectList(json);
	    		System.out.println("data.size()=" + data.size());
	    		System.out.println("============");
	    		System.out.println("第二层解析...");
	    		for (int i = 0; i < data.size(); i++) {
	    			System.out.println("---------------");
	    			System.out.println("第" + (i+1) + "条：" + data.get(i));
	    			String result = data.get(i);
	    			System.out.println("title=" + new JsonPathSelector("$.title").select(result));
	    			System.out.println("url=" + new JsonPathSelector("$.url").select(result));
	    			System.out.println("content=" + new JsonPathSelector("$.content").select(result));
	    			System.out.println("content text=" + formatHtml(new JsonPathSelector("$.content").select(result)));
	    		}
//        }

    }

    @Override   
    public Site getSite() {
    		site.addHeader("Accept", "*/*");
    		site.addHeader("Accept-Encoding", "gzip, deflate, br");
    		site.addHeader("Accept-Language", "en-US,en;q=0.8,zh-CN;q=0.6,zh;q=0.4,zh-TW;q=0.2");
    		site.addHeader("Connection", "keep-alive");
    		site.addHeader("Cookie", "UM_distinctid=15d4e6b236b8c1-0212d4d6465428-30677808-13c680-15d4e6b236ccc1; uuid=\"w:6eeae48e765542f8816b14bd1a8803f2\"; sso_login_status=0; utm_source=toutiao; W2atIF=1; bottom-banner-hide-status=true; tt_webid=6464335891330024973; __utma=252651093.1935118179.1505121696.1505198559.1505198559.1; __utmc=252651093; __utmz=252651093.1505198559.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); tt_track_id=b4300ddb07cd24b2e473b6ebf33f8fbc; csrftoken=490b809baf80308e71e827d7f578d2fb; _ba=BA0.2-20170912-51225-LXO6Nly1dtclVPwkr0pO; _ga=GA1.2.1935118179.1505121696; _gid=GA1.2.1882035805.1505215622; tt_webid=6464861854974871054");
    		site.addHeader("Host", "m.toutiao.com");
    		site.addHeader("Referer", "https://m.toutiao.com/");
    		site.addHeader("User-Agent", "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Mobile Safari/537.36");
        return site;
    }

    public static void main(String[] args) {
        Spider.create(new ToutiaoProcessor3()).addUrl(LIST_URL).run();
    }
    
    public static long getStamp() {
    		return System.currentTimeMillis()/1000;
    }
    
    /** 
     * 将时间戳转换为时间
     */
    public static String stampToDate(long timeStamp){
        String result = null;  
        Date date = new Date(timeStamp * 1000);  
        SimpleDateFormat sd = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");  
        result = sd.format(date);  
        return result;
    }
    
    public static String formatHtml(String content) {
    		content = content.replace("</p>", "***");
		content = content.replace("<BR>", "***");
		content = content.replaceAll("<([\\s\\S]*?)>", "");
		content = content.replace("***", "<br/>");
		content = content.replace("\n", "<br/>");
		content = content.replaceAll("(\\<br/\\>\\s*){2,}", "<br/> ");
		content = content.replaceAll("(&nbsp;\\s*)+", " ");
		return content.replaceAll("<br/>", "");
    }
}
